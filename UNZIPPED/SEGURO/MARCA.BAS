ON ERROR GOTO ERRO

OPEN "C:\DOS\DIR.DAT" FOR INPUT AS #1
INPUT #1, DIR$
CLOSE #1
FICH1$ = DIR$ + "\NUMERO.NUM"
FICH2$ = DIR$ + "\REGISTO.DAT"

I:
OPEN FICH1$ FOR INPUT AS #1
INPUT #1, NUM
N = NUM
CLOSE #1

OPEN FICH2$ FOR RANDOM AS #1
FIELD #1, 8 AS HORA$, 10 AS DATA$
LSET HORA$ = TIME$
LSET DATA$ = DATE$
PUT #1, N
CLOSE #1

OPEN FICH1$ FOR OUTPUT AS #1
WRITE #1, N + 1
CLOSE #1
END

ERRO:
N = 1
OPEN FICH1$ FOR OUTPUT AS #1
WRITE #1, N
CLOSE #1
GOTO I


